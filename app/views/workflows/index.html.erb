<div class="container">
  <h2 class="title">Workflows</h2>

  <% if Settings.workflows.size > 0 %>
    <% Settings.workflows.each_with_index do |workflow, j| %>
      <% if j % 2 == 0 %>
        <div class="columns">
      <% end %>
      <div class="column is-half">
        <h3 class="title is-5"><%= workflow[:name] %></h3>
        <div class="timeline">
          <header class="timeline-header">
            <span class="tag is-medium is-primary">Start</span>
          </header>
          <% workflow[:steps].each_with_index do |step, i| %>
            <div class="timeline-item">
              <div class="timeline-marker is-primary"></div>
              <div class="timeline-content">
                <p class="heading">STEP <%= i + 1 %></p>

                <div class="card">
                  <div class="card-content">
                    <div class="media">
                      <div class="media-content">
                        <p class="title is-4"><%= step[:repository] %></p>
                        <p class="subtitle is-6"><%= step[:branch] %></p>
                      </div>
                    </div>
                    <dl class="subtitle">
                      <dt>Cluster</dt>
                      <dd><%= step[:cluster] %></dd>
                      <dt>Type</dt>
                      <dd><%= step[:type] %></dd>
                      <dt>Resources</dt>
                      <dd><%= step[:resources].join(', ') %></dd>
                    </dl>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
          <header class="timeline-header">
            <span class="tag is-medium is-primary">End</span>
          </header>
        </div>
      </div>

      <% if j % 2 == 1 %>
        </div>
      <% end %>
    <% end %>
  <% else %>
    <p>No data found.</p>
  <% end %>
</div>
